<!-- Compact Issue Card Snippet -->
<div class="issue-card-compact" 
     draggable="true" 
     ondragstart="drag(event)" 
     ondragend="dragEnd(event)" 
     data-issue-id="{{ issue.id }}">
    
    <div class="card-compact-row">
        <div class="card-compact-type">
            {% if issue.issue_type == 'bug' %}
            <i data-lucide="bug" class="type-bug"></i>
            {% elif issue.issue_type == 'feature' %}
            <i data-lucide="sparkles" class="type-feature"></i>
            {% elif issue.issue_type == 'story' %}
            <i data-lucide="bookmark" class="type-story"></i>
            {% else %}
            <i data-lucide="check-square" class="type-task"></i>
            {% endif %}
        </div>
        
        <span class="card-compact-key">{{ issue.key }}</span>
        
        <span class="card-compact-priority priority-{{ issue.priority }}">
            {% if issue.priority == 'critical' %}
            <i data-lucide="alert-circle"></i>
            {% elif issue.priority == 'high' %}
            <i data-lucide="chevrons-up"></i>
            {% elif issue.priority == 'medium' %}
            <i data-lucide="equal"></i>
            {% else %}
            <i data-lucide="chevrons-down"></i>
            {% endif %}
        </span>
    </div>
    
    <div class="card-compact-title">{{ issue.title }}</div>
    
    {% if issue.description %}
    <div class="card-compact-desc">
        {{ issue.description[:60] }}{% if issue.description|length > 60 %}...{% endif %}
    </div>
    {% endif %}
    
    <div class="card-compact-footer">
        <div class="card-compact-assignee">
            {% if issue.assignee %}
            <div class="compact-avatar">{{ issue.assignee.username[0].upper() }}</div>
            <span>{{ issue.assignee.username[:10] }}</span>
            {% else %}
            <span class="unassigned-text">Unassigned</span>
            {% endif %}
        </div>
        
        {% if issue.time_estimate %}
        <div class="card-compact-hours">
            <i data-lucide="clock"></i>
            {{ issue.time_estimate }}h
        </div>
        {% endif %}
    </div>
</div>

<style>
    .issue-card-compact {
        background: var(--white);
        border: 1px solid var(--gray-200);
        border-radius: var(--radius-md);
        padding: 0.75rem;
        margin-bottom: 0.5rem;
        cursor: grab;
        transition: var(--transition-base);
    }

    .issue-card-compact:hover {
        border-color: var(--primary-300);
        box-shadow: var(--shadow-sm);
    }

    .issue-card-compact.dragging {
        opacity: 0.5;
    }

    .card-compact-row {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 0.5rem;
    }

    .card-compact-type i {
        width: 14px;
        height: 14px;
    }

    .type-bug { color: var(--error-500); }
    .type-feature { color: var(--primary-500); }
    .type-story { color: var(--success-500); }
    .type-task { color: var(--info-500); }

    .card-compact-key {
        font-size: 0.6875rem;
        font-weight: 500;
        color: var(--gray-400);
        flex: 1;
    }

    .card-compact-priority i {
        width: 12px;
        height: 12px;
    }

    .card-compact-priority.priority-critical { color: var(--error-500); }
    .card-compact-priority.priority-high { color: var(--warning-500); }
    .card-compact-priority.priority-medium { color: var(--info-500); }
    .card-compact-priority.priority-low { color: var(--gray-400); }

    .card-compact-title {
        font-size: 0.8125rem;
        font-weight: 500;
        color: var(--gray-900);
        line-height: 1.3;
        margin-bottom: 0.375rem;
    }

    .card-compact-desc {
        font-size: 0.6875rem;
        color: var(--gray-500);
        line-height: 1.4;
        margin-bottom: 0.5rem;
    }

    .card-compact-footer {
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .card-compact-assignee {
        display: flex;
        align-items: center;
        gap: 0.375rem;
        font-size: 0.6875rem;
        color: var(--gray-600);
    }

    .compact-avatar {
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: var(--primary-100);
        color: var(--primary-700);
        font-size: 0.5625rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .unassigned-text {
        color: var(--gray-400);
        font-style: italic;
    }

    .card-compact-hours {
        display: flex;
        align-items: center;
        gap: 0.25rem;
        font-size: 0.625rem;
        color: var(--gray-500);
        background: var(--gray-100);
        padding: 0.125rem 0.375rem;
        border-radius: var(--radius-sm);
    }

    .card-compact-hours i {
        width: 10px;
        height: 10px;
    }
</style>
